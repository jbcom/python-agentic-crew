# UV Workspace - manages Python packages
# - packages/agentic-crew = main framework package (PyPI)
# - packages/pytest-agentic-crew = pytest plugin for E2E testing (PyPI)
[tool.uv.workspace]
members = [
    "packages/agentic-crew",
    "packages/pytest-agentic-crew",
]

[tool.uv.sources]
agentic-crew = { workspace = true }
pytest-agentic-crew = { workspace = true }

[dependency-groups]
dev = [
    "agentic-crew[dev,tests,crewai]",
    "pytest-agentic-crew",
    "types-pyyaml>=6.0.12",
]
docs = [
    "sphinx>=7.0.0",
    "sphinx-rtd-theme>=2.0.0",
    "sphinx-autodoc-typehints>=2.0.0",
    "myst-parser>=3.0.0",
    "agentic-crew",
    "pytest-agentic-crew",
]

[tool.ruff]
target-version = "py39"
line-length = 120

[tool.ruff.lint]
select = ["E", "F", "I", "UP", "B", "C4", "SIM"]

[tool.ruff.lint.isort]
known-first-party = ["agentic_crew", "pytest_agentic_crew"]

# Pytest configuration
[tool.pytest.ini_options]
testpaths = ["packages/agentic-crew/tests"]
python_files = "test_*.py"
python_classes = "Test*"
python_functions = "test_*"
addopts = "-v --tb=short"
markers = [
    "e2e: End-to-end tests (require --e2e flag)",
    "crewai: Tests requiring CrewAI framework",
    "langgraph: Tests requiring LangGraph framework",
    "strands: Tests requiring Strands framework",
]

# Mypy configuration
[tool.mypy]
python_version = "3.9"
warn_return_any = true
warn_unused_configs = true
ignore_missing_imports = true

# Coverage configuration
[tool.coverage.run]
omit = ["tests/*"]

[tool.coverage.report]
fail_under = 40
exclude_lines = [
    "pragma: no cover",
    "if TYPE_CHECKING:",
    "raise NotImplementedError",
]
