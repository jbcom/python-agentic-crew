# Sample pyproject.toml additions for vendor-connectors

# Add this to vendor-connectors/pyproject.toml to enable agentic-crew integration

## 1. Add to [project.optional-dependencies]

```toml
[project.optional-dependencies]
# ... existing dependencies ...

# AI crew support for connector generation
crews = [
    "agentic-crew[crewai]>=0.1.0",  # Framework-agnostic crew orchestration
]
```

## 2. (Optional) Add to [project.scripts] for convenience

```toml
[project.scripts]
# ... existing scripts ...

# Convenience script for running crews
generate-connector = "agentic_crew.main:main"
```

## 3. Install

```bash
# Install with crew support
uv sync --extra crews

# Or with pip
pip install -e ".[crews]"
```

## 4. Usage

```bash
# Using agentic-crew CLI
agentic-crew run vendor-connectors connector_builder \
  --input '{"api_docs_url": "https://docs.meshy.ai", "vendor_name": "meshy"}'

# Or if you added the script
generate-connector run vendor-connectors connector_builder \
  --input '{"api_docs_url": "https://docs.meshy.ai", "vendor_name": "meshy"}'
```

## Full Example pyproject.toml Section

```toml
[project]
name = "vendor-connectors"
# ... other fields ...

[project.optional-dependencies]
# Existing extras
meshy = [
    "httpx>=0.27.0",
    "pydantic>=2.0.0",
]

# AI crew support
crews = [
    "agentic-crew[crewai]>=0.1.0",
]

# Development
dev = [
    "pytest>=8.0.0",
    "pytest-asyncio>=0.23.0",
    "pytest-httpx>=0.30.0",
    "ruff>=0.1.0",
]

# All extras
all = [
    "vendor-connectors[meshy,crews,dev]",
]

[project.scripts]
generate-connector = "agentic_crew.main:main"
```

## Environment Setup

Create `.env` file in vendor-connectors:

```bash
# For AI crews
ANTHROPIC_API_KEY=sk-ant-api03-...

# Optional: OpenRouter fallback
OPENROUTER_API_KEY=sk-or-v1-...

# For vendor-specific tools
MESHY_API_KEY=msy_...
```

## CI/CD Integration

Add to `.github/workflows/generate-connector.yml`:

```yaml
name: Generate Connector

on:
  workflow_dispatch:
    inputs:
      api_docs_url:
        description: 'API Documentation URL'
        required: true
      vendor_name:
        description: 'Vendor Name'
        required: true

jobs:
  generate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: astral-sh/setup-uv@v4
      
      - name: Install dependencies
        run: uv sync --extra crews
      
      - name: Generate connector
        env:
          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
        run: |
          uv run agentic-crew run vendor-connectors connector_builder \
            --input '{"api_docs_url": "${{ inputs.api_docs_url }}", "vendor_name": "${{ inputs.vendor_name }}"}' \
            --json | tee result.json
      
      - name: Upload generated code
        uses: actions/upload-artifact@v4
        with:
          name: connector-${{ inputs.vendor_name }}
          path: /tmp/connector-output/${{ inputs.vendor_name }}/
```
